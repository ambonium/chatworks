<head>
  <title>ChatWorks by @jonathanpidgeon</title>
</head>

<body>
  {{> body}}
</body>

<template name="body">
  {{renderPage layoutName}}
</template>

<template name="adminLayout">
  <h1>Admin</h1>
  {{renderPage}}
</template>

<template name="userLayout">
  <div class="navbar navbar-inverse">
    <div class="navbar-inner">
      <div class="brand"><a href="/">ChatWorks</a></div>
      <ul class="nav pull-right">
        <li>{{loginButtons align="right"}}</li>
      </ul>
      <ul class="nav pull-right">
        <li>{{location}}</li>
      </ul>
    </div>
  </div>
  {{renderPage}}
</template>

<template name="adminPage">
  <h2>Go Away</h2>
  <div class="container">
    <div class="row-fluid">
    </div>
  </div>
</template>

<template name="analyzePage">
  <h2>Analyze</h2>
  <div class="container">
    <div class="row-fluid">
      {{analysis}}
    </div>
  </div>
</template>

<template name="chatPage">
  <div class="container">
    <div class="row-fluid">
      {{>chatroom}}
    </div>
    <div class="row-fluid">
      {{>inputbox}}
    </div>
  </div>
</template>

<template name="chatroom">
  <div id="chat" class="span12">
    {{#if messagesLoaded}}
      {{#each messages}}
        {{>message}}
      {{/each}}
    {{else}}
      <div class="centerly"><img src="/img/171.gif"></div>
    {{/if}}
    <div id="stop"></div>
  </div>
</template>

<template name="message">
  {{#if message.action}}
  <div class="message {{confirmed}}">
    <span class="date_time" style="color:{{color}}">[{{#prettyTime}}{{/prettyTime}}]</span>
    <span class="handle" style="color:{{color}}">[{{frequency}}] {{handle}}</span>
    <span class="message" style="color:{{color}}">{{#linkify}}{{/linkify}}</span>
  </div>
  {{else}}
  <div class="message {{confirmed}}">
    <span class="date_time" style="color:{{color}}">[{{#prettyTime}}{{/prettyTime}}]</span>
    <span class="handle" style="color:{{color}}">[{{frequency}}] {{handle}}></span>
    <span class="message" style="color:{{color}}">{{#linkify}}{{/linkify}}</span>
  </div>
  {{/if}}
</template>

<template name="action">
</template>

<template name="inputbox">
  <div class="inputbox span12">
    <div><label for="handle">Handle</label><input id="handle" placeholder="Handle" class="handle" type="text" /><span id="handle-counter">32</span></div>
    <div><label for="message">Message</label><input id="message" placeholder="Message" class="message" type="text" /><span id="message-counter">200</span></div>
    <div><button name="submit" class="btn">Send</button></div>
  </div>
</template>

<template name="rooms">
  <div class="rooms">
    <ul class="nav">
      <li class="dropdown">
        <a href="" class="dropdown-toggle" data-toggle="dropdown">
          Rooms
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          {{#each roomslist}}
            {{>room}}
          {{/each}}
        </ul>
    </ul>
  </div>
</template>

<template name="room">
  <li><a href="/{{room_id}}">{{room_id}} <span>{{date_time}}</span></a></li>
</template>